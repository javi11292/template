version: "3.7"
services:
  server:
    env_file: server/.env
    build: .
    restart: always
    entrypoint: ${ENTRYPOINT-node} src/index
    volumes:
      - "./server:/server"
      - "build:/server/build"
      - "node_modules:/server/node_modules"
    ports:
      - "${PORT-80}:${PORT-80}"

volumes:
  build:
  node_modules: